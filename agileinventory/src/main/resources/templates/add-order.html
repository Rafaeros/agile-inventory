<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" th:href="@{/img/favicon.ico}">
    <link th:href="@{/css/main.css}" rel="stylesheet">
    <title>Adicionando Ordem</title>
</head>

<body class="bg-gray-100 text-5xl">

    <!-- Header -->
    <div class="header relative w-full bg-white p-2 sm:p-4 shadow-md border-b border-gray-500 flex items-center">
        <a class="absolute left-2 sm:left-5 text-sm sm:text-lg font-bold text-purple-700 hover:text-purple-500 transition duration-300 cursor-pointer"
        th:href="@{/orders}">Voltar</a>
        <h2 class="font-semibold text-base sm:text-xl mx-auto text-center">Adicionando Ordem de Produção</h2>
    </div>

    <!-- Main Content -->
    <div class="main-content flex flex-col items-center justify-start mt-5 sm:mt-10 w-full gap-5 px-2 sm:px-10">

        <!-- Order Info -->
        <div
            class="order-info flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-10 w-full bg-white shadow-lg p-4 sm:p-10 rounded">
            <h3 class="text-lg sm:text-2xl font-bold" th:text="${order.orderNumber}"></h3>
            <h3 class="text-lg sm:text-2xl font-bold" th:text="${'Produto: ' + order.code}"></h3>
            <h3 class="text-lg sm:text-2xl font-bold" th:text="${'Quantidade: ' + order.quantity + ' PÇS'}"></h3>
        </div>

        <div class="flex flex-col sm:flex-row items-center justify-center mb-2 p-2 sm:p-5 gap-2 w-full">
            <h2 class="text-lg sm:text-2xl font-semibold sm:font-bold text-center">
                Materiais da Ordem de Produção
            </h2>
        </div>

        <!-- Materials Form -->
        <div
            class="materials-form w-full sm:w-[85vw] flex flex-col items-center justify-center border-2 border-gray-100 shadow-sm rounded">
            
            <form th:action="@{/orders}" method="post" th:object="${order}"
                class="flex flex-col justify-center items-center gap-4 w-full px-2 sm:px-5 py-4">

                <input type="hidden" th:field="*{orderId}">
                <input type="hidden" th:field="*{orderNumber}">
                <input type="hidden" th:field="*{code}">
                <input type="hidden" th:field="*{description}">
                <input type="hidden" th:field="*{quantity}">

                <!-- Materiais -->
                <div th:each="material, iterStat : *{materials}"
                    class="flex flex-col sm:flex-row gap-4 mb-2 w-full border-b border-gray-300 p-2 sm:p-5 rounded">

                    <div class="flex flex-col sm:flex-row w-full gap-2 bg-white rounded-md shadow-md p-8 sm:p-2">
                        <div class="flex flex-col w-full sm:w-2/6">
                            <label class="text-sm font-semibold mb-1 sm:mb-0">Cód.</label>
                            <input
                                class="input w-full outline-none outline-2 sm:outline-1 focus:outline-purple-600 shadow-sm text-sm sm:text-3xl"
                                type="text" th:field="*{materials[__${iterStat.index}__].code}" readonly />
                        </div>
                        <div class="flex flex-col w-full sm:w-3/6">
                            <label class="text-sm font-semibold mb-1 sm:mb-0">Descrição</label>
                            <input
                                class="input w-full outline-none outline-2 sm:outline-1 focus:outline-purple-600 shadow-sm text-sm sm:text-base"
                                type="text" th:field="*{materials[__${iterStat.index}__].description}" readonly />
                        </div>
                        <div class="flex flex-col w-full sm:w-1/6">
                            <label class="text-sm font-semibold mb-1 sm:mb-0 text-center">Qtd.</label>
                            <input
                                class="input w-full outline-2 focus:outline-purple-700 shadow-sm text-sm sm:text-md text-center"
                                type="number" th:field="*{materials[__${iterStat.index}__].quantity}" />
                        </div>
                    </div>

                </div>

                <!-- Submit Button -->
                <button type="submit"
                    class="bg-purple-500 text-white w-full sm:w-80 h-12 sm:h-20 font-semibold flex items-center justify-center rounded-lg hover:bg-purple-600 transition duration-300 mt-4">
                    Cadastrar
                </button>
            </form>
        </div>
    </div>
</body>

</html>